<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VisionX Tube - Download</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>

<body>
    <div class="background-animation"></div>

    <!-- Top Navigation Bar -->
    <nav class="top-nav">
        <div class="nav-brand">
            <button id="themeToggleBtn" class="theme-toggle-btn" title="Alternar Tema">
                <i class="fa-solid fa-moon"></i>
            </button>
            <i class="fa-brands fa-youtube nav-logo"></i>
            <span class="nav-title">VisionX Tube</span>
        </div>
        <form id="searchForm" class="nav-search">
            <div class="search-input-wrap">
                <i class="fa-solid fa-search search-icon"></i>
                <input type="text" id="searchQuery" placeholder="Pesquisar v√≠deos..." required>
            </div>
            <button type="submit" id="searchBtn" class="search-submit-btn">
                <span class="btn-text">Buscar</span>
                <div class="loader" id="searchLoader"></div>
            </button>
        </form>
        <div class="nav-tabs">
            <button class="tab-btn active" data-tab="search" id="tabSearch">
                <i class="fa-solid fa-fire"></i> Explorar
            </button>
            <button class="tab-btn" data-tab="history" id="tabHistory">
                <i class="fa-solid fa-clock-rotate-left"></i> Hist√≥rico
            </button>
        </div>
    </nav>

    <!-- Main Content Area -->
    <main class="app-content">

        <!-- Tab: Search / Explorar -->
        <section id="sectionSearch" class="tab-content active">
            <div id="resultsArea" class="results-grid">
                <!-- Results will be injected here -->
            </div>
            <div id="messageArea" class="message-area hidden"></div>
        </section>

        <!-- Tab: Hist√≥rico -->
        <section id="sectionHistory" class="tab-content">
            <div class="history-header">
                <h2><i class="fa-solid fa-clock-rotate-left"></i> Downloads</h2>
                <button id="clearHistoryBtn" class="clear-history-btn">
                    <i class="fa-solid fa-trash"></i> Limpar Hist√≥rico
                </button>
            </div>

            <!-- Active Downloads (shown when downloading) -->
            <div id="activeDownloads" class="active-downloads hidden">
                <h3 class="section-label"><i class="fa-solid fa-arrow-down"></i> Baixando agora</h3>
                <div id="downloadQueue" class="download-queue">
                    <!-- Active download items go here -->
                </div>
            </div>

            <!-- Past Downloads (localStorage) -->
            <div class="past-downloads-section">
                <h3 class="section-label" id="pastLabel" style="display:none;"><i class="fa-solid fa-check-circle"></i>
                    J√° baixados</h3>
                <div id="historyList" class="history-list">
                    <p class="empty-history">Nenhum download realizado ainda.</p>
                </div>
            </div>
        </section>
    </main>

    <!-- Floating Action Button for Batch Download -->
    <div id="fabContainer" class="fab-container hidden">
        <button id="batchDownloadBtn" class="fab-btn">
            <i class="fa-solid fa-download"></i>
            <span>Baixar</span>
            <span id="selectedCount" class="badge">0</span>
        </button>
    </div>

    <!-- Confirmation Modal -->
    <div id="downloadModal" class="modal-overlay hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h2><i class="fa-solid fa-download"></i> Confirmar Download</h2>
                <button id="modalCloseBtn" class="modal-close-btn"><i class="fa-solid fa-xmark"></i></button>
            </div>
            <div class="modal-body">
                <div class="modal-summary">
                    <span id="modalVideoCount" class="modal-count">0</span> v√≠deos selecionados
                </div>
                <div id="modalVideoList" class="modal-video-list">
                    <!-- Selected video thumbnails will show here -->
                </div>
                <div class="modal-format-section">
                    <label for="modalFormatSelect"><i class="fa-solid fa-sliders"></i> Formato:</label>
                    <select id="modalFormatSelect">
                        <option value="bestvideo+bestaudio/best">üé• Qualidade Original (V√≠deo)</option>
                        <option value="mp3">üéµ MP3 (√Åudio)</option>
                        <option value="thumbnail">üñºÔ∏è Baixar Capa</option>
                    </select>
                </div>
            </div>
            <div class="modal-footer">
                <button id="modalCancelBtn" class="modal-btn modal-btn-cancel">Cancelar</button>
                <button id="modalConfirmBtn" class="modal-btn modal-btn-confirm">
                    <i class="fa-solid fa-download"></i> Iniciar Downloads
                </button>
            </div>
        </div>
    </div>

    <!-- Social Follow Modal -->
    <div id="socialModal" class="modal-overlay hidden">
        <div class="modal-content social-modal-content">
            <div class="modal-header">
                <h2><i class="fa-solid fa-heart"></i> Curtindo o app?</h2>
                <button id="socialModalCloseBtn" class="modal-close-btn"><i class="fa-solid fa-xmark"></i></button>
            </div>
            <div class="modal-body" style="text-align: center;">
                <p style="color: var(--text-muted); margin-bottom: 24px; font-size: 15px;">
                    Nos siga nas redes sociais para mais ferramentas incr√≠veis! ‚ú®
                </p>
                <div class="social-buttons">
                    <a href="https://instagram.com/visionx.dev" target="_blank" class="social-btn instagram-btn">
                        <i class="fa-brands fa-instagram"></i>
                        <div>
                            <span class="social-btn-label">Instagram</span>
                            <span class="social-btn-handle">@visionx.dev</span>
                        </div>
                    </a>
                    <a href="https://tiktok.com/@visionx.dev" target="_blank" class="social-btn tiktok-btn">
                        <i class="fa-brands fa-tiktok"></i>
                        <div>
                            <span class="social-btn-label">TikTok</span>
                            <span class="social-btn-handle">@visionx.dev</span>
                        </div>
                    </a>
                </div>
            </div>
            <div class="modal-footer" style="justify-content: center;">
                <button id="socialModalContinueBtn" class="modal-btn modal-btn-confirm">
                    <i class="fa-solid fa-check"></i> Continuar
                </button>
            </div>
        </div>
    </div>

    <footer>
        <p>Feito por <a href="https://instagram.com/visionx.dev" target="_blank" class="visionx-link">VisionX</a> <i
                class="fa-solid fa-code"></i></p>
    </footer>
    <div class="bottom-fixed-bar"></div>

    <script src="{{ url_for('static', filename='js/script.js') }}"></script>
</body>

</html>